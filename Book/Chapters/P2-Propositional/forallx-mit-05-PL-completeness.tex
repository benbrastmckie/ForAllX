%!TEX root = ../forallx-mit.tex
\chapter{The Completeness of PL}
\label{ch.PL-completeness}

% Considering the analogy with the calculator also helps to shed light on why 
\textsc{PL Completeness} is not mandatory in the same way as \textsc{PL Soundness}.
Continuing the analogy above, we may observe that no calculator is complete for the simple reason that every calculator has a finite amount of memory which is exhausted by arithmetical operations with sufficiently large operands.
Even so, this does not stop calculators from being of considerable utility.
These considerations might lead one to give up any hope of finding a complete logic for $\PL$, settling for a logic that is at least sound and so consistent.
However, logical systems are not finite mechanisms made up of material elements such as the bits inside a calculator.
For this reason, logics don't face the same constraints that a calculator does, and so the analogy breaks down.
In this chapter, we will prove \textsc{PL Completeness} thereby establishing that PL does not leave any room for logical consequences that cannot be derived within PL.
This is a beautiful result and a great achievement of twentieth century logic.

\section{Introduction}
  \label{sec:Introduction}

% Consider a calculator that can compute basic arithmetical operations.
% If that calculator sometimes gave false answers we probably shouldn't call it a calculator at all.
% Although it may often given the right results, there would be no way to know if it was giving us the right result or not, and so could not be relied upon.
% Put otherwise, the calculator is not \textit{sound} with respect to the truths of arithmetic since some of its answers are false.
% For an analogous reason, it was important to show that PL was sound over the semantics for $\PL$ so that we could rely on PL to conduct valid reasoning.
% If $\metaA$ is derivable from $\MetaG$, then we know by soundness that $\metaA$ is also entailed by $\MetaG$.
% Put formally: if $\MetaG\vdash\metaA$, then $\MetaG\vDash\metaA$.

% Completeness asserts the converse so that we may conclude that $\metaA$ is derivable from $\MetaG$ whenever $\metaA$ is entailed by $\MetaG$, or more compactly: if $\MetaG\vDash\metaA$, then $\MetaG\vdash\metaA$.
% You might wonder if our calculator from before is also complete.
% In fact, no calculator is complete for purely material reasons: no matter how much memory a calculator may have, there are numbers big enough that will exhaust its memory.
% For instance, raising one large number to another large number will quickly use up the memory in most calculators that you may have come across.
% Accordingly, there are some arithmetical operations that the calculator simply cannot compute, yielding `ERROR' as a result.
% So long as the calculator doesn't spit out any false answers, it may still be of considerable use despite its incompleteness.

% A separate question is whether, in principle, there could be an effective procedure which yields the right answers to any arithmetical operations.
% By `effective procedure' we do not mean a material computing device but rather an abstract method which could be fully specified with precise rules which one could in principle follow to compute the result of any arithmetical operations.
% It turns out that there is no such effective procedure for arithmetic.
% Put otherwise, arithmetic is incomplete.
% PL does not share this same fate.
% Rather, we will show in the following section that whenever some premises entail a given conclusion, that conclusion is derivable from those premises in PL.
% This is an impressive result.

Completeness asserts that $\metaA$ is derivable from $\MetaG$ whenever $\metaA$ is a logical consequence of $\MetaG$, or more compactly: if $\MetaG\vDash\metaA$, then $\MetaG\vdash\metaA$.
Instead of beginning with $\MetaG\vDash\metaA$ as an assumption and arguing to the conclusion $\MetaG\vdash\metaA$, we will focus on establishing a closely related result: 
\begin{enumerate}[leftmargin=1.5in]
  \item[\textbf{\ref{thm:PL-consat}}] If $\MetaG$ is consistent, $\MetaG$ is satisfiable. 
\end{enumerate}
You might recognize this as the converse of \textbf{\ref{cor:PL-sat_consistent}} from Chapter \ref{ch.PL-Soundness}.
Indeed, \textbf{\ref{thm:PL-consat}} will bear a close connection to \textsc{PL Completeness} in a way that is related to the connection between \textbf{\ref{cor:PL-sat_consistent}} and \textsc{PL Soundness}.
However, instead of proving \textbf{\ref{thm:PL-consat}} from \textsc{PL Completeness}, the proof will work in the reverse direction so that officially \textsc{PL Completeness} will be a corollary of \textbf{\ref{thm:PL-consat}}.
Before diving into the proof in earnest, this section will present an overview of the proof so that you can find your bearings.
If you get lost, think of this section as a map to which you can return.

Recall that a set of $\PL$ wfss $\MetaG$ is inconsistent if $\bot$ is derivable from $\MetaG$, and consistent otherwise.
If $\MetaG\vDash\metaA$, we know that $\MetaG\cup\set{\enot\metaA}$ is unsatisfiable by \textbf{\ref{lemma:PL-unsat_consequence}}, and so $\MetaG\cup\set{\enot\metaA}$ is inconsistent by \textbf{\ref{thm:PL-consat}}.
We will then show that it follows that $\MetaG \vdash \enot \enot \metaA$ by appealing to \textbf{\ref{lemma:PL-conin}} below. 
Given the derived rule DN for double negation elimination, we may conclude that $\MetaG\vdash\metaA$ from the assumption that $\MetaG\vDash\metaA$. 
This provides a sketch of the completeness proof for PL given the theorem above (see \textbf{\ref{cor:Completeness}} for the full proof).

It remains to establish \textbf{\ref{thm:PL-consat}}.
We begin by assuming that $\MetaG$ is a consistent set of wfss of $\PL$. 
We will then extend $\MetaG$ so that it includes every wfs or its negation but not both, calling this \textit{maximal} set $\MetaD_{\MetaG}$, or often just $\MetaD$ for short. 
We will show in $\S\ref{sec:PL-Maximization}$ that $\MetaD$ is consistent, where it follows that $\MetaD$ is \textit{deductively closed} insofar as it contains every wfs that is derivable from $\MetaD$.
Deductive closure is a very important and convenient property which will play a critical role in the later stages of the proof.

% TODO: define 'satisfies' in Ch02
Having extended $\MetaG$ to a much bigger set of wfss $\MetaD$ that is consistent, maximal, and deductively closed, we will proceed to use this set of wfss to construct an interpretation $\I_{\MetaD}$ of $\PL$ that satisfies $\MetaD$, and so satisfies $\MetaG$ as a result. 
This may sound strange since we are starting with a set $\MetaG$ of wfss of $\PL$ to ultimately interpret the wfss in $\MetaG$ itself.
Strange as this may seem, there is no circularity here: to interpret our language $\PL$, we need a systematic way to assign each sentence letter to exactly one truth-value.
So long as we achieve this without assuming that such an assignment has already been given, no questions will have been begged.

Given that $\I_{\MetaD}$ satisfies $\MetaG$, we may conclude that $\MetaG$ is satisfiable. 
Following tradition, we will refer to this cleverly constructed interpretation $\I_{\MetaD}$ as a Henkin interpretation after Leon Henkin who first presented this proof strategy in 1949.
In Chapter \ref{ch.FOL-complete}, we will extend this same method to show that the first-order logic FOL that we will provide in Chapter \ref{ch.FOL-deduction} is complete with respect to the theory of logical consequence given in Chapter \ref{ch.FOL-semantics}.
Not only will we repeat the same methodology that we have followed so far in developing a semantics, logic, and metalogic for $\PL$ for our first-order language $\FOL$, many of the same results will carry over.
For the time being, we will continue to restrict attention to $\PL$, it's semantics, and the proof system PL with which we are presently concerned.

This provides a rough overview of the proof strategy that will be deployed below.
If you get lost along the way, continuing to slog on in the dark is not advisable.
Rather, it is better to keep zooming out so that you can keep track of where you are and where you are headed to next.
In addition to returning to this section, you may need to scan back through the proof multiple times, unlocking each piece and slowly watching them come together.

Without further ado, we may make the first assumption indicated above that $\MetaG$ is an arbitrary set of wfss of $\PL$. 
Although it may help to hold onto $\MetaG$ throughout the course of the following sections, many of the lemmas that we establish will be completely general in form, holding for any arbitrary set of wfss of $\PL$.
We will then put these general results together to apply to $\MetaG$ in order to show that $\MetaG$ is indeed satisfiable. 


\section{Maximal Consistency}%
  \label{sec:PL-Maximization}
  
A set of wfss $\MetaD$ is \define{maximal} in $\PL$ just in case as either $\metaB\in\MetaD$ or $\enot\metaB\in\MetaD$ for every wfs $\metaB$ in $\PL$.
Having assumed that $\MetaG$ is consistent in $\PL$, we may maximize $\MetaG$ by adding every wfs of $\PL$ that we can without inconsistency. 
To do so, we will begin enumerating all wfss $\metaB_0,\metaB_1,\metaB_2,\ldots$ in $\PL$ whatsoever in order to present the following recursive construction:
\begin{align*}
  % \label{name}
  \MetaD_0     &= \MetaG \\
  \MetaD_{n+1} &= 
    \begin{cases}
      \MetaD_n\cup\set{\metaB_n} &\text{if } \MetaD_n\cup\set{\metaB_n} \text{ is consistent}\\
      \MetaD_n\cup\set{\enot\metaB_n} &\text{otherwise}.
    \end{cases}\\
  \MetaD_\MetaG &= \bigcup_{i\in\N}\MetaD_n. 
\end{align*}
If $\MetaG$ is consistent, we may show that $\MetaD_{\MetaG}$ is both consistent and maximal.
Given these two properties, we may then show that $\MetaD_{\MetaG}$ is deductively closed.
Moreover, we may show $\MetaG\subseteq\MetaD_{\MetaG}$.
These properties will form the basis upon which we will construct the Henkin interpretation in $\S\ref{sub:HenkinInterpretation}$.
In order to establish these results, we will begin by proving some supporting lemmas.
Whereas some of these lemmas are substantial, others are simply convenient, allowing us to streamline the presentation of the proofs of the results to come.


% % TODO show that the wfss are enumerable
% In order to do so, it will be convenient to enumerate all wfss of $\PL$, however, we must first convince ourselves that this is possible.
%
% Recall from $\S\ref{sec:PL-truthfuctions}$ that a function $f: D \to R$ from the \define{domain} $D$ to the \define{range} $R$ is any relation $f \subseteq D \times R$ from $D$ to $R$ where $f(x) = f(y)$ for any $x, y \in D$ where $x = y$. 
% Put otherwise, functions pair elements in the domain with unique elements in the range.
% A function $f: D \to R$ is \define{surjective} just in case for every element $y \in R$ in the range, there is some element $x \in D$ in the domain where $y = f(x)$. 
%
% Given these definitions, we may define an \define{enumeration} of a nonempty set $X$ is any surjective function $f: \N \to X$ where $\N$ is the set of natural numbers.
% Of course, whenever there is one enumeration of a nonempty set, there could be others.
% Thus we will say that a set $X$ is \define{enumerable} just in case there is an enumeration of $X$.
% What we should like to show is that the set of all wfs of $\PL$ is enumerable. 
%
% The proof will proceed by induction of complexity.
% Before presenting the proof in earnest, it will help to establish some minor results.
% In particular, consider the following:
%
% \begin{Lthm} \label{lemma:PL-enumerate_cross}
%   If $X$ and $Y$ are both enumerable, then $X \times Y$ is enumerable. 
% \end{Lthm} \vspace{-.2in}
%
% \begin{quote} 
%   \textit{Proof:}
%   This proof is left as an exercise for the reader.
%   \qed
% \end{quote}
%
% Given this result, we may may prove the following:
%
% \begin{Lthm} \label{lemma:PL-enumerate_wfs}
%   The set of all wfs of $\PL$ is enumerable. 
% \end{Lthm} \vspace{-.2in}
%
% \begin{quote} 
%   \textit{Proof:}
%   The proof proceeds by induction on complexity where we will aim to show that .
%
%   \textit{Base Case:}
%   Recall that the sentence letters of $\PL$ took the form $\metaA_i$ where $\metaA$ is a capital letter of the English alphabet and $i \in \N$. 
%   
%   \qed
% \end{quote}

\begin{Lthm} \label{lemma:PL-incon}
  If $\Lambda\cup\set{\metaA}$ is inconsistent, then $\Lambda\vdash\enot\metaA$. 
\end{Lthm} \vspace{-.2in}
  % TODO: define contradiction in the more general way to start

\begin{quote} 
  \textit{Proof:} Assume $\Lambda\cup\set{\metaA}$ is inconsistent.
  Thus $\Lambda\cup\set{\metaA}\vdash \bot$, and so there is a derivation $X$ of $A\eand\enot A$ from $\Lambda\cup\set{\metaA}$ given the definition of $\bot$. 
  Let $X'$ be the result of replacing the premise $\metaA$ with $\metaA$ as an assumption and adding lines for $A$ and $\enot A$ by $\eand$E. 
  We may then discharge the assumption of $\metaA$ by $\enot$I in order to derive $\enot\metaA$ from $\Lambda$.
  Thus we may conclude that $\Lambda\vdash\enot\metaA$. 
  \qed
\end{quote}




\begin{Lthm} \label{lemma:PL-cont}
  If $\Lambda\vdash\metaA$ and $\Lambda\vdash\enot\metaA$, then $\Lambda$ is inconsistent. 
\end{Lthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} 
  Assume $\Lambda\vdash\metaA$ and $\Lambda\vdash\enot\metaA$.
  Thus there is a PL derivation $X$ of $\metaA$ from $\Lambda$ as well as a PL derivation $Y$ of $\enot\metaA$ from $\Lambda$. 
  Letting $Z$ be the result of concatenating $X$ and $Y$ and renumbering lines.
  We may then extend the derivation by using EFQ from $\S\ref{EFQ}$ to derive $A\eand\enot A$, observing that $Z$ is a derivation of $A\eand\enot A$ from $\Lambda$.
  By definition, $\Lambda$ is inconsistent.
  \qed
\end{quote}





\begin{Lthm} \label{lemma:PL-conin}
  If $\Lambda \cup \set{\metaA}$ and $\Lambda\cup \set{\enot\metaA}$ are both inconsistent, then $\Lambda$ is inconsistent. 
\end{Lthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} Assuming that $\Lambda \cup \set{\metaA}$ and $\Lambda\cup \set{\enot\metaA}$ are both inconsistent, it follows that $\Lambda\vdash \enot\metaA$ and $\Lambda\vdash\enot\enot\metaA$ by \textbf{\ref{lemma:PL-incon}}.
  Given \textbf{\ref{lemma:PL-cont}} above, it follows immediately that $\Lambda$ is inconsistent. 
  \qed
\end{quote}





% \begin{Lthm}[Cut] \label{lemma:PL-prcut}
%   If $\Lambda \vdash \metaA$ and $\Pi\cup\set{\metaA} \vdash \metaB$, then $\Lambda\cup\Pi \vdash \metaB$. 
% \end{Lthm} \vspace{-.2in}
%
% \begin{quote} 
%   \textit{Proof:} Assume that $\Lambda \vdash \metaA$ and $\Pi \cup \set{\metaA} \vdash \metaB$.
%   It follows that there is a derivation of $\metaA$ from $\Lambda$ as well as a derivation $Y$ of $\metaB$ from $\Pi \cup \set{\metaA}$. 
%   Let $Z$ be the result of replacing the lines in which $\metaA$ occurs as a premise in $Y$ with the derivation $X$, renumbering lines as needed.
%   Since $Z$ derives $\metaB$ from the premises $\Lambda$ in $X$ together with the premises $\Pi$ in $Y$, we may conclude that $\Lambda\cup\Pi\vdash\metaB$.
%   \qed
% \end{quote}




\begin{Lthm} \label{lemma:PL-max}
  If $\MetaG$ is consistent in $\PL$, then $\MetaD_{\MetaG}$ is maximal consistent. 
\end{Lthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} 
  Assume $\MetaG$ is consistent and let $\metaA$ be any wfs of $\PL$.
  Thus $\metaA=\metaB_i$ for some $i\in\N$ given the enumeration above where either $\metaB_i\in\MetaD_{i+1}$ or $\enot\metaB_i\in\MetaD_{i+1}$.
  Since $\MetaD_{i+1}\subseteq\MetaD_{\MetaG}$, either $\metaA\in\MetaD_{\MetaG}$ or $\enot\metaA\in\MetaD_{\MetaG}$, and so $\MetaD_{\MetaG}$ is maximal.

  The proof that $\MetaD_{\MetaG}$ is consistent goes by induction on the construction of $\MetaD_{\MetaG}$, where we know by assumption that $\MetaG=\MetaD_0$ is consistent. 
  Assume for induction that $\MetaD_n$ is consistent. 
  There are two cases to consider.

  \textit{Case 1:} $\MetaD_n\cup\set{\metaB_n}$ is consistent, and so $\MetaD_{n+1}=\MetaD_n\cup\set{\metaB_n}$ is consistent. 

  \textit{Case 2:} $\MetaD_n\cup\set{\metaB_n}$ is not consistent, and so $\MetaD_{n+1}=\MetaD_n\cup\set{\enot\metaB_n}$. 
  Assume for contradiction that $\MetaD_n\cup\set{\enot\metaB_n}$ is not consistent. 
  By \textbf{\ref{lemma:PL-conin}}, $\MetaD_n$ is inconsistent, contradicting the hypothesis. 
  % It follows that $\MetaD_n\vdash\enot\enot\metaB_n$ by \textbf{\ref{lemma:PL-incon}}, and so $\MetaD_n\vdash\metaB_n$ by DN.
  % Since $\MetaD_n\cup\set{\metaB_n}$ is also not consistent, $\MetaD_n\cup\set{\metaB_n} \vdash A\eand\enot A$.
  % By \textbf{\ref{lemma:PL-prcut}}, $\MetaD_n \vdash A\eand\enot A$, and so $\MetaD_n$ is not consistent, contradicting the hypothesis. 
  Thus $\MetaD_{n+1}$ is consistent. 

  Since $\MetaD_{n+1}$ is consistent, it follows by induction that $\MetaD_k$ is consistent for all $k\in\N$.
  Assume for contradiction that $\MetaD_{\MetaG}$ is inconsistent.
  Thus $\MetaD_{\MetaG}\vdash \bot$, and so there is a proof $Y$ of $A\eand\enot A$ from $\MetaD_{\MetaG}$ given the definition of $\bot$. 
    % TODO: remove particular contradiction
  Since $Y$ is finite, there is a finite number of premises cited in $Y$, and so there is some $k\in\N$ where every premise cited in $Y$ belongs to $\MetaD_k$.
  As a result, $Y$ is also a proof of $A\eand\enot A$ from $\MetaD_k$, and so $\MetaD_k$ is inconsistent, contradicting the above. 
  Thus $\MetaD_{\MetaG}$ is consistent. 
  \qed
\end{quote}



Whereas maximality is relatively cheap--- \textit{viz.} the set of all wfss of $\PL$ is maximal--- showing that a set of wfss is both maximal and consistent is much more difficult and, as we will soon see, much more significant.
Intuitively, the Henkin construction given above specifies a way to increase the strength (i.e., deductive power) of a consistent set as much as possible without crossing over into inconsistency.
Maximal consistent sets of this kind may be shown to have a very important property which we may now turn to define.

A set $\MetaD$ of wfss of $\PL$ is \define{deductively closed} in PL just in case for any wfs $\metaA$ of $\PL$, if $\MetaD\vdash\metaA$, then $\metaA\in\MetaD$.
Accordingly, deductively closed sets of wfss are identical to the set of wfss which they derive.
In order to show that every maximal consistent set of wfss of $\PL$ is deductively closed, we begin by establishing the following lemma.

\begin{Lthm} \label{lemma:PL-deductive}
  If $\MetaD$ is maximal consistent, then $\MetaD$ is deductively closed.
\end{Lthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} Assume $\MetaD$ is maximal consistent.
  Let $\metaA$ be a wfs of $\PL$ where $\MetaD\vdash\metaA$.
  If $\MetaD\vdash\enot\metaA$, then $\MetaD$ is inconsistent by \textbf{\ref{lemma:PL-cont}}, contradicting the assumption.
  Thus $\MetaD\nproves\enot\metaA$, and so it follows that $\enot\metaA\notin\MetaD$ since otherwise $\MetaD\vdash\enot\metaA$ follows by the reiteration rule R. 
  Since $\MetaD$ is maximal, we may conclude that $\metaA\in\MetaD$. 
  \qed
\end{quote}

Given these results, we are now ready to draw on  $\MetaD_{\MetaG}$ in order define the Henkin interpretation of $\PL$.
We will then direct our efforts towards showing that this interpretation witnesses the satisfiability of $\MetaD_{\MetaG}$, and so so of $\MetaG$ in particular. 



\section{Henkin Interpretation}%
  \label{sub:HenkinInterpretation}

Having extended the consistent set of wfss $\MetaG$ in $\PL$ to a maximal consistent set of wfss $\MetaD_{\MetaG}$ in $\PL$ and showing that $\MetaD_{\MetaG}$ is deductively closed, we may use $\MetaD_{\MetaG}$ to construct a Henkin interpretation that satisfies $\MetaD_{\MetaG}$, and so also satisfies $\MetaG$.
For ease of exposition, we will drop the subscripts, assuming $\MetaD=\MetaD_{\MetaG}$ throughout what follows.

We may now proceed to draw on the definition of $\MetaD$ in order to specify an especially natural interpretation of $\PL$ which will guarantee that the resulting interpretation satisfies all of the wfss in $\MetaD$.
In particular, consider the following definitions:
  \[
    \text{For all sentence letters } \metaA \text{ of } \PL, \text{ let } \I_\MetaD(\metaA) = 
      \begin{cases}
        1 & \text{if } \metaA \in \MetaD\\
        0 & \text{otherwise.}
      \end{cases}
  \]
Since $\I_{\MetaD}$ assigns every sentence letter of $\PL$ to a truth-value, $\I_{\MetaD}$ satisfies the definition of a $\PL$ interpretation.
Since this construction was introduced by Leon Henkin (1949), we will refer to $\I_\MetaD$ as the \define{henkin interpretation} of $\PL$ for $\MetaG$ (recall that $\MetaD=\MetaD_{\MetaG}$).

It remains to show that $\I_{\MetaD}$ satisfies $\MetaD$, and so satisfies $\MetaG$ as a result.
To do so, we will begin by proving the following lemmas where the first is a proof theoretic analogue of \textbf{\ref{lemma:PL-weakening}}.





\begin{Lthm} \label{lemma:PL-prweak}
  If $\Lambda\vdash\metaA$, then $\Lambda\cup\Pi\vdash\metaA$.
\end{Lthm} \vspace{-.2in}
  % TODO: move weakening to PL chapter

\begin{quote} 
  \textit{Proof:} 
  Assuming that $\Lambda\vdash\metaA$, there is a derivation $X$ of $\metaA$ from $\Lambda$ in PL.
  Since $\Lambda\subseteq\Lambda\cup\Pi$, it follows that $X$ is also a derivation of $\metaA$ from $\Lambda\cup\Pi$ in PL.
  Thus we may conclude that $\Lambda\cup\Pi\vdash\metaA$. 
  \qed
\end{quote}







\begin{Lthm} \label{lemma:PL-truth}
  If $\MetaD$ is a maximal consistent set of wfss of $\PL$, then for every wfs $\metaA$ of $\PL$: $\V{\I_{\MetaD}}(\metaA) = 1$ just in case $\metaA\in\MetaD$.  
\end{Lthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} 
  Assume $\MetaD$ is a maximal consistent set of $\PL$ wfss.
  We will show by induction on complexity that for any wfs $\metaA$ of $\PL$, $\V{\I_\MetaD}(\metaA) = 1$ just in case $\metaA\in\MetaD$.
  After the base case, there are five cases in the induction step.

  \textit{Base Case:} 
  Let $\metaA$ be an arbitrary wfs of $\PL$ where $\comp(\metaA)=0$.
  It follows that $\metaA$ is a sentence letter of $\PL$.
  We may then consider the following biconditionals:
  \begin{align*}
    \V{\I_\MetaD}(\metaA)=1 
      &\textit{ ~iff~ } \I_{\MetaD}(\metaA) = 1\\
      &\textit{ ~iff~ } \metaA \in \MetaD.
  \end{align*}
  Since $\metaA$ is a sentence letter, the first biconditional follows by the semantics for $\PL$, and the second biconditional follows from the definition of $\I_\MetaD$.
  It follows that for any wfs $\metaA$ of $\PL$ where $\comp(\metaA) = 0$, $\V{\I_\MetaD}(\metaA) = 1$ just in case $\metaA\in\MetaD$.

  \textit{Induction:}
  Assume for induction that for every wfs $\metaA$ of $\PL$, if $\comp(\metaA)\leq n$, then $\V{\I_\MetaD}(\metaA) = 1$ just in case $\metaA\in\MetaD$. 
  Let $\metaA$ be a wfs of $\PL$ where $\comp(\metaA)=n+1$.

  \textit{Case 1:}
  Assume $\metaA=\enot \metaB$.
  Since $\comp(\enot \metaB)=\comp(\metaB)+1$ and $\comp(\metaA)=n+1$, it follows that $\comp(\metaB)=n$.
  We may then reason as follows:
  \begin{align*}
    \V{\I_\MetaD}(\metaA) = 1 &\textit{ ~iff~ } \V{\I_\MetaD}(\enot \metaB) = 1\\
      &\textit{ ~iff~ } \V{\I_\MetaD}(\metaB) = 0   \tag{1} \\
      &\textit{ ~iff~ } \metaB \notin \MetaD        \tag{2} \\
      &\textit{ ~iff~ } \enot \metaB \in \MetaD     \tag{3} \\
      &\textit{ ~iff~ } \metaA \in \MetaD.
  \end{align*}
  Whereas $(1)$ follows from the semantics for negation and $(2)$ holds by hypothesis, $(3)$ follows from the maximality of $\MetaD$. % which is established in \textbf{\ref{lemma:PL-max}}.
  The other biconditionals follow from the case assumption.
  Thus $\V{\I_\MetaD}(\metaA) = 1$ just in case $\metaA\in\MetaD$, completing the case.

  \textit{Case 2:}
  Assume $\metaA = \metaB \eand \metaC$.
  Since $\comp(\metaB\eand\metaC)=\comp(\metaB)+\comp(\metaC)+1$ and  $\comp(\metaA)=n+1$, it follows that $\comp(\metaB),\comp(\metaC)\leq n$.
  Thus we have:
  \begin{align*}
    \V{\I_\MetaD}(\metaA)=1 &\textit{ ~iff~ } \V{\I_\MetaD}(\metaB\eand\metaC)=1\\
      &\textit{ ~iff~ } \V{\I_\MetaD}(\metaB)=\V{\I_\MetaD}(\metaC)=1   \tag{1} \\
      &\textit{ ~iff~ } \metaB,\metaC\in\MetaD                          \tag{2} \\
      &\textit{ ~iff~ } \metaB\eand\metaC\in\MetaD                      \tag{3} \\
      &\textit{ ~iff~ } \metaA\in\MetaD.
  \end{align*}
  Whereas $(1)$ follows from the semantics for conjunction, $(2)$ holds by hypothesis.
  In order to establish $(3)$, assume that $\metaB\eand\metaC\in\MetaD$, it follows that $\MetaD\vdash\metaB$ and $\MetaD\vdash\metaC$ by $\eand$E, and so $\metaB,\metaC\in\MetaD$ by \textbf{\ref{lemma:PL-deductive}}.
  Assuming instead that $\metaB,\metaC\in\MetaD$, we know that $\MetaD\vdash\metaB\eand\metaC$ by $\eand$I, and so $\metaB\eand\metaC\in\MetaD$ by \textbf{\ref{lemma:PL-deductive}}.
  This proves $(3)$ where the other biconditionals follow from the case assumption.


  \textit{Case 3:}
  Assume $\metaA=\metaB\eor\metaC$.
  (Exercise for the reader.)
  % Since $\comp(\metaB\eor\metaC)=\comp(\metaB)+\comp(\metaC)+1$ and  $\comp(\metaA)=n+1$, it follows that $\comp(\metaB),\comp(\metaC)\leq n$.
  % Thus we have:
  %
  % \vspace{-.2in}
  % \begin{align*}
  %   \V{\I_\MetaD}(\metaA)=1 &\textit{ ~iff~ } \V{\I_\MetaD}(\metaB\eor\metaC)=1\\
  %     &\textit{ ~iff~ } \V{\I_\MetaD}(\metaB)=1 \text{ or } \V{\I_\MetaD}(\metaC)=1   \tag{1}\\
  %     &\textit{ ~iff~ } \metaB\in\MetaD \text{ or } \metaC\in\MetaD                   \tag{2}\\
  %     &\textit{ ~iff~ } \metaB\eor\metaC\in\MetaD                                     \tag{3}\\
  %     &\textit{ ~iff~ } \metaA\in\MetaD.
  % \end{align*}
  %
  % Whereas $(1)$ follows from the semantics for disjunvtion, $(2)$ holds by hypothesis since both $\comp(\metaB), \comp(\metaC) \leq n$.
  % In order to establish $(3)$, assume that $\metaB\in\MetaD$.
  % By disjunction introduction, $\MetaD \vdash \metaB \eor \metaC$, and so $\metaB \eor \metaC \in \MetaD$ by \textbf{\ref{lemma:PL-deductive}}.
  % Analogous reasoning shows that $\metaB \eor \metaC \in \MetaD$ if $\metaC \in \MetaD$, and so $\metaB \eor \metaC \in \MetaD$ if either $\metaB \in \MetaD$ or $\metaC \in \MetaD$. 
  % For the converse, assume instead that $\metaB \eor \metaC \in \MetaD$.
  % If $\metaB \in \MetaD$, then either $\metaB \in \MetaD$ or $\metaC \in \MetaD$.
  % If $\metaB \notin \MetaD$, then $\enot \metaB \in \MetaD$ by \textbf{\ref{lemma:PL-max}}, and so $\MetaD \vdash \metaC$ by DS from $\S\ref{DS}$.
  % Thus $\metaC \in \MetaD$ by \textbf{\ref{lemma:PL-deductive}}, and so either $\metaB \in \MetaD$ or $\metaC \in \MetaD$. 
  % It follows that $\metaB \in \MetaD$ or $\metaC \in \MetaD$ if $\metaB \eor \metaC \in \MetaD$ which, together with the above, establishes $(3)$.  
  % The other biconditionals follow from the case assumption.

  \textit{Case 4:}
  Assume $\metaA=\metaB\eif\metaC$.
  Since $\comp(\metaB\eif\metaC)=\comp(\metaB)+\comp(\metaC)+1$ and  $\comp(\metaA)=n+1$, it follows that $\comp(\metaB),\comp(\metaC)\leq n$.
  Thus we have:
  \begin{align*}
    \V{\I_\MetaD}(\metaA)=1 &\textit{ ~iff~ } \V{\I_\MetaD}(\metaB\eif\metaC)=1\\
      &\textit{ ~iff~ } \V{\I_\MetaD}(\metaB) = 0 \text{ or } \V{\I_\MetaD}(\metaC)=1   \tag{1}\\
      &\textit{ ~iff~ } \metaB\notin\MetaD \text{ or } \metaC\in\MetaD                    \tag{2}\\
      &\textit{ ~iff~ } \metaB\eif\metaC\in\MetaD                                         \tag{3}\\
      &\textit{ ~iff~ } \metaA\in\MetaD.
  \end{align*}
  Whereas $(1)$ follows from the semantics for conjunction, $(2)$ holds by hypothesis.

  In order to establish $(3)$, assume that $\metaB \notin \MetaD$.
  Since $\MetaD$ is maximal, it follows that $\enot \metaB \in \MetaD$.
  We may then derive $\enot \metaB \vdash \metaB \eif \metaC$ since given $\enot \metaB$ as a premise, we may use the rule AS to write $\metaB$ on a second line, deriving $\metaC$ by EFQ from $\S\ref{EFQ}$ and using $\eif$I to discharge the assumption.
  % TODO: derive this in an earlier chapter
  Thus $\MetaD\vdash\metaB\eif\metaC$ by \textbf{\ref{lemma:PL-prweak}}, and so $\metaB\eif\metaC\in\MetaD$ by \textbf{\ref{lemma:PL-deductive}}.
  Next we may assume that $\metaC\in\MetaD$, we may derive $\metaC\vdash\metaB\eif\metaC$ since given $\metaC$ as a premise, we may use the rule AS to write $\metaB$ on a second line.
  % TODO: derive this in an earlier chapter
  By then using the rule R, we may rewrite the premise $\metaC$, discharging our assumption with the rule $\eif$I in order to derive $\metaB\eif\metaC$ from $\metaC$. 
  Thus $\MetaD\vdash\metaB\eif\metaC$ by \textbf{\ref{lemma:PL-prweak}}, and so $\metaB\eif\metaC\in\MetaD$ by \textbf{\ref{lemma:PL-deductive}}.
  We may then conclude that $\metaB\eif\metaC\in\MetaD$ if either $\metaB\notin\MetaD$ or $\metaC\in\MetaD$.

  Assume instead that $\metaB\eif\metaC\in\MetaD$.
  If $\metaB\notin\MetaD$, then $\metaB\notin\MetaD$ or $\metaC\in\MetaD$.
  If $\metaB\in\MetaD$, then $\MetaD\vdash\metaC$ by the rule $\eif$E, and so $\metaC\in\MetaD$ by \textbf{\ref{lemma:PL-deductive}}.
  Thus $\metaB\notin\MetaD$ or $\metaC\in\MetaD$ if $\metaB\eif\metaC\in\MetaD$ which, given the above, establishes $(3)$.  

  The other biconditionals follow from the case assumption.

  \textit{Case 5:}
  Assume $\metaA=\metaB\eiff\metaC$.
  (Exercise for the reader.)

  \textit{Conclusion:}
  It follows by induction that for every wfs $\metaA$ of $\PL$ of any complexity, $\V{\I_\MetaD}(\metaA) = 1$ just in case $\metaA\in\MetaD$. 
  This completes the proof.
  \qed
\end{quote}





\section{Completeness and Compactness}%
  \label{sec:PL-CompleteCompact}

Having constructed a maximal consistent set $\MetaD$ of wfss of $\PL$ from the consistent set $\MetaG$ of wfs of $\PL$ and defined the Henkin interpretation $\I_{\MetaD}$ as above, we are now ready to draw on the lemmas above in order to show that $\MetaD$ is satisfiable.
In order to extend this result to $\MetaG$, we may begin with the trivial lemma given below. 

\begin{Lthm} \label{lemma:PL-include}
  $\MetaG\subseteq\MetaD_{\MetaG}$.
\end{Lthm} \vspace{-.2in}
 
\begin{quote} 
  \textit{Proof:} 
  By definition, $\MetaG=\MetaD_0$ where $\MetaD_0\subseteq\MetaD_{\MetaG}$.
  \qed
\end{quote}

This lemma amounts to little more than an observation, but will be convenient to reference below.
We may now move to draw the following conclusion:

\begin{Tthm} \label{thm:PL-consat}
  If $\MetaG$ is consistent, then $\MetaG$ is satisfiable. 
\end{Tthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} 
  Let $\MetaG$ be a consistent set of wfss of $\PL$.
  By \textbf{\ref{lemma:PL-max}}, $\MetaD_{\MetaG}$ is a maximal consistent set of wfss in $\PL$.
  Letting $\MetaD=\MetaD_{\MetaG}$ and $\I_{\MetaD}$ be the Henkin interpretation of $\PL$ defined above, \textbf{\ref{lemma:PL-truth}} shows that for every wfs $\metaA$ of $\PL$, $\V{\I}(\metaA) = 1$ just in case $\metaA \in \MetaD$.
  Thus $\V{\I}(\metaA) = 1$ for all $\metaA \in \MetaD$.
  Since $\MetaG \subseteq \MetaD$ by \textbf{\ref{lemma:PL-include}}, $\V{\I}(\metaA) = 1$ for all $\metaA \in \MetaG$.
  By definition, $\MetaG$ is satisfiable.
  \qed
\end{quote}

Given this result, the completeness of PL over the semantics for $\PL$ follows as a corollary. 

\begin{Cthm}[Completeness] \label{cor:Completeness}
  If $\MetaG\vDash\metaA$, then $\MetaG\vdash\metaA$.
\end{Cthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:}
  Assume $\MetaG\vDash\metaA$. 
  By \textbf{\ref{lemma:PL-unsat_consequence}}, $\MetaG \cup \set{\enot \metaA}$ is unsatisfiable, and so $\MetaG \cup \set{\enot \metaA}$ is inconsistent by \textbf{\ref{thm:PL-consat}}. 
  Thus $\MetaG \vdash \enot \enot \metaA$ by \textbf{\ref{lemma:PL-incon}}.
  % TODO: make this proof appeal to cut in CH03
  % Since $\enot\enot\metaA\vdash\metaA$ by DN, we may conclude that $\MetaG\vdash\metaA$ by \textbf{\ref{lemma:PL-cut}}.
  Thus there is some PL derivation $X$ of $\enot \enot \metaA$ from $\MetaG$. 
  Given the rule DN derived in $\S\ref{sub:PL-double_negation}$, we may extend $X$ to derive $\metaA$ from $\MetaG$, and so conclude that $\MetaG \vdash \metaA$. 
  \qed
\end{quote}

Completeness may seem like a good property for any proof system to have.
In particular, the completeness of PL shows that there is no (extensionally) better proof system which allows us to derive a valid inference that PL leaves out.
However, there is another perspective which takes completeness to describe a certain limitation on what sorts of entailments hold between wfss in $\PL$, calling the notion of entailment in $\PL$ into question.
We will close the chapter with an important consequence of completeness.

\begin{Cthm} \label{cor:compact}
  If $\MetaG\vDash\metaA$, then there is a finite subset $\Lambda\subseteq\MetaG$ where $\Lambda\vDash\metaA$.
\end{Cthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} 
  Assume $\MetaG\vDash\metaA$.  
  It follows by completeness that $\MetaG\vdash\metaA$, and so there is a derivation $X$ of $\metaA$ from $\MetaG$.
  Letting $\MetaG_X$ be the set of premises which appear in $X$, it follows that $\MetaG_X\vdash\metaA$, and so $\MetaG_X\vDash\metaA$.
  Since $X$ is finite, $\MetaG_X$ is also finite, and so whenever $\MetaG\vDash\metaA$ there is a finite subset $\Lambda\subseteq\MetaG$ where $\Lambda\vDash\metaA$.
  \qed
\end{quote}



\begin{Cthm}[Compactness] \label{cor:compact2}
  If every finite subset $\Lambda\subseteq\MetaG$ is satisfiable, then $\MetaG$ is satisfiable.
\end{Cthm} \vspace{-.2in}

\begin{quote} 
  \textit{Proof:} 
  Assume for contraposition that $\MetaG$ is unsatisfiable. 
  It follows vacuously that $\MetaG\vDash\bot$, and so $\Lambda\vDash\bot$ by \textbf{\ref{cor:compact}} for some finite subset $\Lambda\subseteq\MetaG$.
  Thus there is some finite subset $\Lambda\subseteq\MetaG$ that is unsatisfiable. 
  By contraposition, if every finite subset $\Lambda\subseteq\MetaG$ is satisfiable, then $\MetaG$ is satisfiable. 
  \qed
\end{quote}


This property is referred to as \define{compactness}.
Recall that arguments were required to be finite sequences of wfss of $\PL$ where an argument is valid just in case its conclusion is a logical consequence of its premises.
When we defined what it is for $\metaA$ to be a logical consequence of $\MetaG$, we permitted $\MetaG$ to be any set of wfss of $\PL$ including infinite sets. 
What compactness shows is that this additional permission does not add anything that would have been lost were logical consequence restricted to finite sets of wfss of $\PL$.

% Although compactness may seems like a nice property, it demonstrates that there cannot be wfss which are logical consequences of only infinite sets of wfss of $\PL$.
% However, there would seems to be some natural examples.
% For instance, suppose that $A_n$ were to regiment a sentence of the form ``There are at least $n$ things that are $F$'' where $\MetaG_\infty \coloneq \set{\metaA_n : n \in \N}$ where $\N$ is the set of all natural numbers. 
% Although it would seem that it is a logical consequence of $\MetaG_\infty$ that infinitely many things are $F$, this logical consequence cannot hold by compactness.

% At present, none of this is a problem since we do not have the expressive resources to say that at least $n$ things are $F$ in $\PL$. 
% Rather, $A_n$ and the like are sentence letters which are assigned to either $1$ or $0$ by each $\PL$ interpretation. 
% Accordingly, there is no way for these sentence letters to express that at least $n$ things are $F$ across all interpretations, much less to say that infinitely many things are $F$. 
% This is an example of the expressive limitations of the language $\PL$.

It is important to emphasize that \textsc{PL Completeness} does not entail that PL provides an exhaustive description of formal reasoning.
Rather, PL only claims to exhaustively describe logical consequence in $\PL$ which in turn is constrained by the expressive resources which $\PL$ includes.
At most, we may think of PL as providing a complete description of formal reasoning in $\PL$ given the logical forms that $\PL$ is able to capture.

In the following chapter we will extend the expressive resources of $\PL$ by adding constants, variables, predicates, and quantifiers, referring to this first-order language as $\FOL$.
These additions will make it possible to regiment a host of valid arguments that we are unable to capture in $\PL$.
After stipulating the syntax of $\FOL$ in a similar manner to $\PL$, we will also provide a semantics and natural deduction system FOL, developing its metalogic by establishing both the soundness and completeness of FOL.
Despite the increase in expressive power of $\FOL$ and the logical strength of FOL, the methodology that we will follow will be the same as what we have already provided for $\PL$.




\iffalse

\practiceproblems

\solutions
\problempart
\label{pr.QLalttrees-sound}
Following are possible modifications to our QL tree system. For each, imagine a system that is like the system laid out in this chapter, except for the indicated change. Would the modified tree system be sound? If so, explain how the proof given in this chapter would extend to a system with this rule; if not, give a tree that is a counterexample to the soundness of the modified system.
\begin{earg}
\item Change the rule for existentials to this rule:
	\factoidbox{
	\begin{center}
	\begin{prooftree}
	{not line numbering}
	[\qt{\exists}{\script{x}}\metaA{}, checked={\script{a}}
		[\metaA{}\substitute{\script{x}}{\script{a}}, just=for \emph{any} \script{a}
		]
	]
	\end{prooftree}
	\end{center}
	}
	
\item Change the rule for existentials to this rule:
	\factoidbox{
	\begin{center}
	\begin{prooftree}
	{not line numbering}
	[\qt{\exists}{\script{x}}\metaA{}, checked=d
		[\metaA{}\substitute{\script{x}}{d}, just=(whether or not $d$ is new)
		]
	]
	\end{prooftree}
	\end{center}
	}

\item Change the rule for existentials to this rule:
	\factoidbox{
	\begin{center}
	\begin{prooftree}
	{not line numbering}
	[\qt{\exists}{\script{x}}\metaA{}, checked
		[\metaA{}\substitute{\script{x}}{\script{a}}, just={for 3 different names, old or new}
		[ , grouped
		[\metaA{}\substitute{\script{x}}{\script{b}}, grouped
		[ , grouped
		[\metaA{}\substitute{\script{x}}{\script{c}}, grouped
		]
		]
		]
		]
		]
	]
	\end{prooftree}
	\end{center}
	}

\item Change the rule for universals to this rule:
	\factoidbox{
	\begin{center}
	\begin{prooftree}
	{not line numbering}
	[\qt{\forall}{\script{x}}\metaA{}, checked
		[\metaA{}\substitute{\script{x}}{\script{a}}, just={for 3 different names, old or new}
		[ , grouped
		[\metaA{}\substitute{\script{x}}{\script{b}}, grouped
		[ , grouped
		[\metaA{}\substitute{\script{x}}{\script{c}}, grouped
		]
		]
		]
		]
		]
	]
	\end{prooftree}
	\end{center}
	}

\item Change the rule for existentials to this rule:
	\factoidbox{
	\begin{center}
	\begin{prooftree}
	{not line numbering}
	[\qt{\exists}{\script{x}}\metaA{}, checked
		[\metaA{}\substitute{\script{x}}{\script{a}}, just={for 3 new names}
		[ , grouped
		[\metaA{}\substitute{\script{x}}{\script{b}}, grouped
		[ , grouped
		[\metaA{}\substitute{\script{x}}{\script{c}}, grouped
		]
		]
		]
		]
		]
	]
	\end{prooftree}
	\end{center}
	}

\item Change the rule for universals to this rule:
	\factoidbox{
            	\begin{center}
            \begin{prooftree}
            {not line numbering}
            [\qt{\forall}{\script{x}}\metaA{}, checked={\script{a}}
            	[\metaA{}\substitute{\script{x}}{\script{a}}, just=where \script{a} is \emph{new}
            	]
            ]
            \end{prooftree}
            \end{center}
	}

\item Change the rule for conjunction to this rule:
	\factoidbox{
            	\begin{center}
            \begin{prooftree}
            {not line numbering}
            	[\metaA{} \eand \metaB{}, checked
            		[\qt{\exists}{\script{x}} \metaA{}, just=where \script{x} does not occur in \metaA{}
			[\metaB{}, grouped
            		]
            		]
		]
            \end{prooftree}
            \end{center}
	}


\item Change this requirement (given on page \pageref{branchcompletion.defined})...
	\factoidbox{A branch is \define{complete} if and only if either (i) it is closed, or (ii) every resolvable wfs in every branch has been resolved, and for every general wfs and every name \script{a} in the branch, the \script{a} instance of that general wfs has been taken.}
	...to this one:
	\factoidbox{A branch is \define{complete} if and only if either (i) it is closed, or (ii) every resolvable wfs in every branch has been resolved, and for every general wfs, \emph{at least one instance of} that general wfs has been taken.}

\item Change the branch completion requirement to:
	\factoidbox{\ldots and for every general wfs and every name \script{a} \emph{that is above that general wfs in the branch}, the \script{a} instance of that general wfs has been taken.}

\item Change the branch completion requirement to:
	\factoidbox{\ldots and for every general wfs and every name \script{a} in the branch, the \script{a} instance of that general wfs has been taken, \emph{and at least one additional new instance of that general wfs has also been taken}.}
	
	\end{earg}
	
	
	
	
\solutions
\problempart
\label{pr.QLalttrees-complete}
For each of the rule modifications given in Part \ref{pr.QLalttrees-sound}, would the modified tree system be complete? If so, explain how the proof given in this chapter would extend to a system with this rule; if not, give a tree that is a counterexample to the completeness of the modified system.

\fi

